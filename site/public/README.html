<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- Basic -->
    <title> | Developers Guide</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="../images/favicon.ico" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://docs.ebaocloud.life">
    <meta property="og:title" content=" | Developers Guide">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="">
    <meta name="twitter:title" content=" | Developers Guide">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="" />
    <link rel="stylesheet" href="/style/style.css">
    <link rel="stylesheet" href="/style/Source Sans Pro.css">

  </head>
  <body class="">
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      <a class="logo-wrapper" href="http://docs.ebaocloud.life" title="eBaoCloud Docs eBaoCloud LI Docs"  >
        <img src="../images/ebaocloud-logo.png" alt="eBaoCloud Docs" class="logo"/>
      </a>
    </div>
  </div>

  <div class="nav-group right">
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="http://www.ebaotech.com/ebao-cloud-en/overview"  >
          <span>About eBaoCloud</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop active ">
        <a class="link" href="./guide/"  >
          <span>Developers Guide</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="http://docs.ebaocloud.life/tc/"  >
          <span>Test Cases</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="http://docs.ebaocloud.life/api"  >
          <span>APIs Reference</span>
        </a>
      </div>
    
      <div class="nav-item show-desktop  ">
        <a class="link" href="#"  >
          <span>Forums</span>
        </a>
      </div>
    
    <div class="links">
      <ul id="links_container">
        <li class="lang-bar lang-en" data-link="http://apidoc.ebaocloud.life/api/swagger-en.json"></li>
        <li class="lang-bar lang-cn" data-link="http://apidoc.ebaocloud.life/api/swagger-cn.json"></li>
      </ul>
    </div>
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class="" href="http://docs.ebaocloud.life" title="eBaoCloud Docs"  >
        <span>eBaoCloud Docs eBaoCloud LI Docs</span>
      </a>
    </div>
    
      <div class="panel-item "">
        <a class="" href="http://www.ebaotech.com/ebao-cloud-en/overview"  >
          <span>About eBaoCloud</span>
        </a>
      </div>
    
      <div class="panel-item active"">
        <a class="" href="./guide/"  >
          <span>Developers Guide</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://docs.ebaocloud.life/tc/"  >
          <span>Test Cases</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://docs.ebaocloud.life/api"  >
          <span>APIs Reference</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="#"  >
          <span>Forums</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Developers Guide</span>
      
    </div>

    

    <ul class="toc">
      
        <li>
          
            <div class="heading-toc">Before Start</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Preparation</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="code_structure.html" class="sidebar-link ">
                  <span>Code Structure</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="routes.html" class="sidebar-link ">
                  <span>Routes</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">TUTORIAL</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="api-tutorial.html" class="sidebar-link ">
                  <span>Consume API through Postman</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="react-tutorial.html" class="sidebar-link ">
                  <span>Build a React App</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Reference</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="setup.html" class="sidebar-link ">
                  <span>Setup</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Tools</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="swagger.html" class="sidebar-link ">
                  <span>Swagger</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="postman.html" class="sidebar-link ">
                  <span>Postman</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="jmeter.html" class="sidebar-link ">
                  <span>jMeter</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page"></h1>
      
<!--
      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/zhuliliang/ebaocloud-li-docs/tree/master/content/README.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
-->
    </div>

    <div class="document-formatting">
      <h1 id="eBaoCloud-Sales-Frontend-Architecture"><a href="#eBaoCloud-Sales-Frontend-Architecture" class="headerlink" title="eBaoCloud Sales Frontend Architecture"></a>eBaoCloud Sales Frontend Architecture</h1><h2 id="1-Technologies"><a href="#1-Technologies" class="headerlink" title="1. Technologies"></a>1. Technologies</h2><ul>
<li><a href="https://github.com/davezuko/react-redux-starter-kit" target="_blank" rel="external">React Redux Starter Kit</a></li>
<li><a href="https://facebook.github.io/react/" target="_blank" rel="external">React</a></li>
<li><a href="https://github.com/ReactTraining/react-router" target="_blank" rel="external">React Router</a></li>
<li><a href="https://github.com/lukehoban/es6features" target="_blank" rel="external">ES6</a></li>
<li><a href="http://redux.js.org/" target="_blank" rel="external">Redux</a></li>
</ul>
<h2 id="2-IDE-and-debug-tools"><a href="#2-IDE-and-debug-tools" class="headerlink" title="2.    IDE and debug tools"></a>2.    IDE and debug tools</h2><ul>
<li><a href="https://code.visualstudio.com/docs/nodejs/reactjs-tutorial" target="_blank" rel="external">VS Code</a> or <a href="https://blog.jetbrains.com/webstorm/2015/10/working-with-reactjs-in-webstorm-coding-assistance/" target="_blank" rel="external">WebStorm</a></li>
<li>Chrome and Redux chrome plugin (google app store)<br><img src="/md-resource/chrome-redux-plugin.png" alt="Chrome Redux Plugin"></li>
</ul>
<h2 id="3-Main-3rd-part-UI-libraries"><a href="#3-Main-3rd-part-UI-libraries" class="headerlink" title="3.    Main 3rd part UI libraries"></a>3.    Main 3rd part UI libraries</h2><ul>
<li>1)    animate.css</li>
<li>2)    material-ui</li>
<li>3)    react-addons-css-transition-group</li>
<li>4)    react-loader-advanced</li>
<li>5)    react-pull-to-refresh</li>
<li>6)    react-signature-canvas</li>
<li>7)    react-tap-event-plugin</li>
<li>8)    react-waypoint</li>
<li>9)    react-weui</li>
</ul>
<h2 id="4-Main-3rd-part-tools"><a href="#4-Main-3rd-part-tools" class="headerlink" title="4.    Main 3rd part tools"></a>4.    Main 3rd part tools</h2><ul>
<li>1)    moment</li>
<li>2)    numeral</li>
<li>4)    history</li>
<li>5)    mobile-detect</li>
</ul>
<h2 id="5-Main-3rd-part-dev-build-tools"><a href="#5-Main-3rd-part-dev-build-tools" class="headerlink" title="5.    Main 3rd part dev build tools"></a>5.    Main 3rd part dev build tools</h2><ul>
<li>1)    express</li>
<li>2)    webpack</li>
<li>3)    babel</li>
<li>4)    node-sass</li>
<li>5)    grunt</li>
<li>6)    i18next-extract-gettext</li>
</ul>
<h2 id="6-Layout-amp-CSS-solution"><a href="#6-Layout-amp-CSS-solution" class="headerlink" title="6.    Layout &amp; CSS solution"></a>6.    Layout &amp; CSS solution</h2><ul>
<li>1)    amfe-flexible</li>
<li>2) sass</li>
<li>3)    rem</li>
<li>4)    flex box</li>
</ul>
<h2 id="7-Setup"><a href="#7-Setup" class="headerlink" title="7.    Setup"></a>7.    Setup</h2><ul>
<li>1)    Install Node.js</li>
<li><p>2)    On windows run below in CMD:</p>
<ul>
<li><figure class="highlight plain"><figcaption><span>install --global --production windows-build-tools```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- 3)	In project root folder run:</div><div class="line">  - ```npm install</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>4)    To run dev:</p>
<ul>
<li><figure class="highlight plain"><figcaption><span>start```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- 5) In Chrome visit:</div><div class="line">  - [click here ](localhost:3000/app/productList?msg=eyJ0ZW5hbnRDb2RlIjoiR1VFU1QiLCJwcm9kdWNlckNvZGUiOiJhdjEyMzQ1IiwicHJvZHVjZXJOYW1lIjoiQXZyaXN0IEFnZW50IiwicHJvZHVjZXJUeXBlIjoiMSIsInByb2R1Y2VyUGhvbmUiOiIxMjM0NTY3ODkwMSIsInByb2R1Y2VyRW1haWwiOiJhZG1pbkBlYmFvdGVjaC5jb20iLCJleHRyYVByb3BlcnRpZXMiOnt9LCJhZ2VudEluZm9NYXAiOnt9fQ==&amp;sign=14222f754cf86d06cd1f462d8ce91278&amp;tenantCode=GUEST)</div><div class="line">- 6)	To build release package</div><div class="line">  - a.	UAT build: ```npm run build:uat</div></pre></td></tr></table></figure>
</li>
<li><p>b.    Production build: <figure class="highlight plain"><figcaption><span>run build```</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## 8.	Naming conventions</div><div class="line">- 1)	All varialbes, parameters, properties, functions and files names should follow Camel Case</div><div class="line">- 2)	All class names and react component js file names should follow Pascal Case</div><div class="line">- 3)	All const strings should follow UPPER_CASE_WITH_UNSERSCORE</div><div class="line">- 4)	All naming should be self-descriptive, more detail would be better.</div><div class="line"></div><div class="line">## 9.	Folder structure</div><div class="line">/root path | comments</div><div class="line">--------------- | ------------------</div><div class="line">i18nProcess.txt |	i18n process guide</div><div class="line">Gruntfile.js |	i18n grunt tasks config</div><div class="line">gettext0.19.8.1-iconv1.14-shared-64.exe |	Windows msgmerge tool of gettext</div><div class="line">project.config.js	|	project level build config</div><div class="line">/build/ |	All build-related code</div><div class="line">/server/ |	Express application that provides webpack middleware</div><div class="line">/public/ |	Static public assets (not imported anywhere in source code)</div><div class="line">/translations/ |	GNU gettext i18n translation files</div><div class="line">/src/ |	source code folder, see below</div><div class="line"></div><div class="line">## 10.	src code folder structure</div><div class="line">/ | root path</div><div class="line">--------------- | ------------------</div><div class="line">main.js |	webpack entry point of js</div><div class="line">index.html |	webpack entry point of html template</div><div class="line">config.js	app | config (should also be packed into bundle)</div><div class="line">/common/ |	common utils</div><div class="line">action.js |	common loading handle actions</div><div class="line">history.js |	overwritten browser history with base name ‘app’</div><div class="line">request.js |	simplify es6 fetch</div><div class="line">resource.js |	static resource utils</div><div class="line">share.js |	overwritten share button behavior by different use case</div><div class="line">utils.js |	util functions</div><div class="line">/companies/ |	company components for special inputs and flow during proposal, company code is folder name, CompanyComponents should be customized by each insurer and could have:</div><div class="line">FormJob |	optional, UI component return jobClass and jobCode, if no then job is not required</div><div class="line">FormAddress |	optional, UI component return an address region object, if no then region is not required</div><div class="line">BankFormGroup |	optional, UI component return bank account object, if no then choose other payment method rather than bank card transfer</div><div class="line">ProposerQuestionnaire |	optional, proposer questionnaire, if no then skip this step</div><div class="line">InsuredQuestionnaire |	optional, insured questionnaire, if no skip this step</div><div class="line">InsuredProposerRelations |	required, code of insured ph relation, self must be 1</div><div class="line">BeneficiaryInsuredRelations |	optional, code of bene insured relation, if no then legal</div><div class="line">CertiTypes |	required, code of certification card type, 1 is Chinese ID card now</div><div class="line">MarriageStatuses |	optional, code of marriage status, if no then marriage status is not required</div><div class="line">DocumentTypes |	optional, which proposal documents should have, if no skip material collection and signature page, need more design</div><div class="line">NoticeAndPrompt |	optional, usually customer should agree some warnings and notices during proposal process in China</div><div class="line">AddressData |	optional, address data to show region name in check order page</div><div class="line">BankData |	optional, bank data to show bank name in check order page</div><div class="line">BankAddressData |	optional, address data to show bank account registered city</div><div class="line">NeedWorkplace |	optional, if ph and insured need company input</div><div class="line">NeedHeightAndWeight |	optional, if ph and insured need height and weight</div><div class="line">NeedIncomeAndSource |	optional, if ph need income and source</div><div class="line">/components/ |	common UI components</div><div class="line">Dialog/ |	Alert.js and Confirm.js</div><div class="line">Form/ |</div><div class="line">BankFormGroup.js |	default Chinese bank form group</div><div class="line">FormAddress.js |	default region picker</div><div class="line">FormDate.js |	an select with popup date picker</div><div class="line">FormField.js |	common form field wrapper with left label</div><div class="line">FormGroup.js |	form group with icon, title and an action button</div><div class="line">FormInput.js |	input with type</div><div class="line">FormRadio.js |	a better radio button group</div><div class="line">FormSelect.js |	select with options</div><div class="line">FormSwitch.js |	a toggle</div><div class="line">FormText.js |		static text with label</div><div class="line">FormTextarea.js |	1st line is label and next line is a full with textarea</div><div class="line">Header/ |	page header with back icon</div><div class="line">Modal/ |	a sized center modal with title, body and close button</div><div class="line">NativeImageUpload/ |	UI with default image and on click handler</div><div class="line">NavTab/ |	navigation tab</div><div class="line">Pikcer/ |</div><div class="line">AddressPicker.js |	a slide up 3 level province/city/region picker</div><div class="line">DatePicker.js |	a slide up 3 level yyyy/MM/dd date picker</div><div class="line">JobPicker.js |	a slide up 3 level big/small/slight job picker</div><div class="line">Picker.js |	a slide up picker</div><div class="line">PropupAddressPicker.js |	AddressPicker with popup</div><div class="line">PopupDatePicker.js |	DatePicker with popup</div><div class="line">PopupJobPicker.js |	JobPicker with popup</div><div class="line">Selector.js	|	a slide up select based on Picker</div><div class="line">Popup/ |</div><div class="line">Alert.js |	a better alert</div><div class="line">Layer.js |	a popup layer with transparent background</div><div class="line">Pop.js |	a full scree modal dialog with title and bottom close button</div><div class="line">PopupSelector.js |	a popup slide up selector with title, confirm and cancel buttons</div><div class="line">Tip.js |	a toast show message 3 seconds and disappear with animation</div><div class="line">Toast.js |	a center loading circle written by css</div><div class="line">Question/ |	common question UI component with a toggle and sub question textarea</div><div class="line">SearchBar/ |	overwrite react-weui SearchBar</div><div class="line">Signature/ |	signature UI component</div><div class="line">Steps/ |	step bar</div><div class="line">Tag/	|	tag.js and tagGroup.js</div><div class="line">/i18n/ |	localized strings</div><div class="line">/layouts/ |	page layout, can add page in and out animation</div><div class="line">/routes/ |	web app page router and business module</div><div class="line">Clause/ |	life product term page</div><div class="line">CompanyIntro/ |	insurer intro page</div><div class="line">DetailDescription/ |	life product detail info page</div><div class="line">Disease/ |	liability disease page</div><div class="line">Home/ |	a template of a route</div><div class="line">PersonalPlan/ |	user quotation list page</div><div class="line">Plan/ |	quotation view page</div><div class="line">ProductDetails/ |	sales product detail info page</div><div class="line">ProductList/ |	sales product list</div><div class="line">Quote/ |	quote and proposal pages</div><div class="line">/store/ |	Redux-specific pieces</div><div class="line">createStore.js |	Create and instrument redux store</div><div class="line">reducers.js |	Reducer registry and injection</div><div class="line">/styles/ |	Application-wide styles (generally settings)</div><div class="line"></div><div class="line">## How Redux work</div><div class="line">![Redux Action Flow](/md-resource/redux-action-flow.png)</div><div class="line">![Redux Data Flow](/md-resource/redux-data-flow.png)</div><div class="line"></div><div class="line">## 11.	routes child folder code structure, module name is folder name</div><div class="line">components/ |	react UI components view or page</div><div class="line">--------------- | ------------------</div><div class="line">containers/ |	redux container that connect view and store</div><div class="line">modules/ |	redux modues</div><div class="line">action.js |	redux private actions, public actions and async actions</div><div class="line">actionType.js |	action type used by action and reducer</div><div class="line">reducer.js |	redux reducer that save or modify data map to view</div><div class="line">index.js |	dynamic router entry point</div><div class="line"></div><div class="line">## 12.	How to create a router page for a new module</div><div class="line">- 1)	Copy a template module folder that named “Home”, rename it to your module name, such as “Xxx”</div><div class="line">- 2)	In components/ folder, change the root view name from ‘HomeView.js’ to what you wanted (such as ‘XxxView.js’), change the sass file name from ‘HomeView.scss’ (such as ‘XxxView.scss’) to what you wanted. Change the view name in below line:</div><div class="line">```js</div><div class="line">export default class HomeView extends React.Component</div></pre></td></tr></table></figure></p>
</li>
</ul>
</li>
<li><p>3)    In containers/ folder, change the root container name from ‘HomeContainer.js’ to what you wanted (such as ‘XxxContainer.js’). Change the file import in below line:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> HomeView <span class="keyword">from</span> <span class="string">'../components/HomeView'</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>Now no need to change modules/ folder yet</p>
<ul>
<li><p>5)    In index.js, add a path for this module such as:<br>path: ‘xxx/:requiredPathParam(:/optionalPathParam)’,</p>
</li>
<li><p>6)    Change the import corresponding such as:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; injectReducer &#125; <span class="keyword">from</span> <span class="string">'../../store/reducers'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> (store) =&gt; (&#123;</div><div class="line">  <span class="attr">path</span>: <span class="string">'xxx/:requiredPathParam(:/optionalPathParam)'</span>,</div><div class="line">  <span class="comment">/*  Async getComponent is only invoked when route matches   */</span></div><div class="line">  getComponent (nextState, cb) &#123;</div><div class="line">    <span class="comment">/*  Webpack - use 'require.ensure' to create a split point</span></div><div class="line">     and embed an async module loader (jsonp) when bundling   */</div><div class="line">    <span class="built_in">require</span>.ensure([], (<span class="built_in">require</span>) =&gt; &#123;</div><div class="line">      <span class="comment">/*  Webpack - use require callback to define</span></div><div class="line">       dependencies for bundling   */</div><div class="line">      <span class="keyword">const</span> Xxx = <span class="built_in">require</span>(<span class="string">'./containers/XxxContainer'</span>).default</div><div class="line">      <span class="keyword">const</span> reducer = <span class="built_in">require</span>(<span class="string">'./modules/reducer'</span>).default</div><div class="line"></div><div class="line">      <span class="comment">/*  Add the reducer to the store on key 'xxx'  */</span></div><div class="line">      injectReducer(store, &#123; <span class="attr">key</span>: <span class="string">'xxx'</span>, reducer &#125;)</div><div class="line"></div><div class="line">      <span class="comment">/*  Return getComponent   */</span></div><div class="line">      cb(<span class="literal">null</span>, Xxx)</div><div class="line"></div><div class="line">      <span class="comment">/* Webpack named bundle   */</span></div><div class="line">    &#125;, <span class="string">'xxx'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>7) Add it into /routes/index.js:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">childRoutes : [</div><div class="line">  Xxx(store),</div><div class="line">  ...</div><div class="line">]</div></pre></td></tr></table></figure>
</li>
<li><p>8) To test it, in Chrome visit <a href="http://localhost:3000/app/xxx/pathParam" target="_blank" rel="external">http://localhost:3000/app/xxx/pathParam</a></p>
</li>
</ul>
<h2 id="13-How-to-get-path-param-and-query-parameter-from-URL-in-view"><a href="#13-How-to-get-path-param-and-query-parameter-from-URL-in-view" class="headerlink" title="13.    How to get path param and query parameter from URL in view"></a>13.    How to get path param and query parameter from URL in view</h2><ul>
<li><p>1)    Path parameter (/:pathParam) such as:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> pathParam = <span class="keyword">this</span>.props.params.pathParam,</div></pre></td></tr></table></figure>
</li>
<li><p>2)    Query parameter (?queryParam=) such as:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> queryParam = <span class="keyword">this</span>.props.location.query.queryParam;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="14-How-to-call-an-data-action-from-view-to-fetch-data-from-a-rest-service"><a href="#14-How-to-call-an-data-action-from-view-to-fetch-data-from-a-rest-service" class="headerlink" title="14.    How to call an data action from view to fetch data from a rest service"></a>14.    How to call an data action from view to fetch data from a rest service</h2><ul>
<li><p>1)    In reducer.js, add data model you want to save to store which returns from rest service, such as:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// data store from backend</span></div><div class="line"><span class="keyword">const</span> initDataState = &#123;</div><div class="line">  <span class="attr">restReturnObject</span>: <span class="literal">null</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">data</span>(<span class="params">state = initDataState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="attr">default</span>:</div><div class="line">      <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>2)    In actionTypes.js add an action type that describe what will will happen to modify store tree, module action name must start with ‘Xxx/’ (global action could have not prefix), such as:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> RECEIVE_REST_RETURN_OJBECT = <span class="string">'xxx/RECEIVE_REST_RETURN_OJBECT'</span></div></pre></td></tr></table></figure>
</li>
<li><p>3)    In actions.js add a private action:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setRestReturnObject</span> (<span class="params">restReturnObject</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: t.RECEIVE_REST_RETURN_OJBECT,</div><div class="line">    restReturnObject,</div><div class="line">    <span class="attr">receivedAt</span>: <span class="built_in">Date</span>.now(),</div><div class="line">    <span class="attr">meta</span>: &#123;</div><div class="line">      <span class="attr">loading</span>: <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>4)    In reducer.js add a reducer to modify store tree:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// data store from backend</span></div><div class="line"><span class="keyword">const</span> initDataState = &#123;</div><div class="line">  <span class="attr">restReturnObject</span>: <span class="literal">null</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">data</span>(<span class="params">state = initDataState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> t.RECEIVE_REST_RETURN_OJBECT:</div><div class="line">      <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;&#125;, state, &#123;</div><div class="line">        <span class="attr">restReturnObject</span>: action.restReturnObject,</div><div class="line">      &#125;)</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">      <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>5)    In actions.js add a public async action:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchRestServiceData</span> (<span class="params">requestJson, callback</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch, getState</span>) =&gt;</span> &#123;</div><div class="line">    dispatch(requestData(<span class="string">'fetchRestServiceData'</span>))</div><div class="line">    <span class="keyword">return</span> request(<span class="string">'http://server/services/rest/path'</span>, requestJson)</div><div class="line">      .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> &#123; restReturnObject &#125; = data</div><div class="line">        dispatch(setRestReturnObject(restReturnObject)) <span class="comment">// save to store to waiting for container map this store object to props</span></div><div class="line">        callback &amp;&amp; callback(<span class="literal">null</span>, restReturnObject) <span class="comment">// to use in view after action callback immediately</span></div><div class="line">      &#125;)</div><div class="line">      .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'server error'</span>, err)</div><div class="line">        dispatch(receiveError(err.toString()))</div><div class="line">        callback &amp;&amp; callback(err.toString())</div><div class="line">      &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>6)    In XxxContainer.js (or other modules container) map returned object to props if you want keep it in view (router change by browser history will keep redux stote tree)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">loading</span>: !state.loading.done,</div><div class="line">  <span class="attr">restReturnObject</span>: state.xxx.data.restReturnObject</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>7)    Call this action in view after page start:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">componentWillMount () &#123;</div><div class="line">  <span class="keyword">let</span> params = &#123;</div><div class="line">    <span class="attr">requestKey</span>: <span class="string">''</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">this</span>.props.actions.fetchRestServiceData(params, (error, restReturnObject)=&gt; &#123;</div><div class="line">    <span class="comment">// handle error or restReturnObject</span></div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>8) Use this rest model in view:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.props.restReturnObject</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="15-How-to-call-an-UI-action-to-set-UI-model-to-store-tree-and-shares-between-pages-in-browser-session"><a href="#15-How-to-call-an-UI-action-to-set-UI-model-to-store-tree-and-shares-between-pages-in-browser-session" class="headerlink" title="15.    How to call an UI action to set UI model to store tree and shares between pages in browser session"></a>15.    How to call an UI action to set UI model to store tree and shares between pages in browser session</h1><ul>
<li><p>1)    In reducer.js, add UI model you want to save to store which may come from view state, such as:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ui store from view</span></div><div class="line"><span class="keyword">const</span> initUiState = &#123;</div><div class="line">  <span class="attr">uiModel</span>: <span class="literal">null</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ui</span> (<span class="params">state = initUiState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="attr">default</span>:</div><div class="line">      <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>2)    In actionTypes.js add an action type that describe what you want to modify store tree, module action name must start with ‘Xxx/’ (global action could have not prefix), such as:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> SET_UI_MODEL = <span class="string">'xxx/SET_UI_MODEL'</span></div></pre></td></tr></table></figure>
</li>
<li><p>3)    In actions.js add a public action:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setUiModel</span>(<span class="params">uiModel</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">type</span>: t.SET_UI_MODEL,</div><div class="line">    uiModel,</div><div class="line">    <span class="attr">receivedAt</span>: <span class="built_in">Date</span>.now(),</div><div class="line">    <span class="attr">meta</span>: &#123;</div><div class="line">      <span class="attr">loading</span>: <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>4)    In reducer.js add a reducer to modify store tree:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ui store from view</span></div><div class="line"><span class="keyword">const</span> initUiState = &#123;</div><div class="line">  <span class="attr">uiModel</span>: <span class="literal">null</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ui</span> (<span class="params">state = initUiState, action</span>) </span>&#123;</div><div class="line">  <span class="keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="keyword">case</span> t.SET_UI_MODEL:</div><div class="line">      <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;&#125;, state, &#123;</div><div class="line">        <span class="attr">uiModel</span>: action.uiModel,</div><div class="line">      &#125;)</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">      <span class="keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>5)    Call this action in anywhere:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.props.actions.setUiModel(<span class="keyword">this</span>.state.model)</div></pre></td></tr></table></figure>
</li>
<li><p>7)    In XxxContainer.js (or other modules container) map UI model object to props if you want use it in any view:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">loading</span>: !state.loading.done,</div><div class="line">  <span class="attr">restReturnObject</span>: state.xxx.data.restReturnObject,</div><div class="line">  <span class="attr">uiModel</span>: state.xxx.ui.uiModel,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>8) Use this UI model in view:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.props.uiModel</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="16-How-to-use-cross-module-actions-and-model"><a href="#16-How-to-use-cross-module-actions-and-model" class="headerlink" title="16.    How to use cross module actions and model"></a>16.    How to use cross module actions and model</h2><ul>
<li><p>1)    You can dispatch other module’s actions in container (if other module is not initialized, call its actions will do nothing), such as:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> otherActions <span class="keyword">from</span> <span class="string">'../../Other/modules/actions'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch, props</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">actions</span>: bindActionCreators(actions, dispatch),</div><div class="line">    <span class="attr">otherActions</span>: bindActionCreators(otherActions, dispatch),</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>2)    You can also map other module’s model in redux store tree in container (you must check whether other module store tree exists), such as:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">loading</span>: !state.loading.done,</div><div class="line">  <span class="attr">myData</span>: state.my.data.myData,</div><div class="line">  <span class="attr">myUiModel</span>: state.my.ui.myUiModel,</div><div class="line">  <span class="attr">otherData</span>: state.other? state.other.data.otherData : <span class="literal">null</span>,</div><div class="line">  <span class="attr">otherUiModel</span>: state.other? state.other.ui.otherUiModel : <span class="literal">null</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="17-i18n"><a href="#17-i18n" class="headerlink" title="17.    i18n"></a>17.    i18n</h2><ul>
<li>1)    Solution is based on GNU standard, and I choose tools to follow it</li>
<li>2)    Tools: grunt, gettext, msgmerge, po2js</li>
<li>3)    Please read i18nProcess.txt</li>
<li>4)    Current gettex only scan .js file, so if you don’t want gettext scan them then rename them to .jsx</li>
</ul>
<h2 id="18-How-to-write-a-UI-component"><a href="#18-How-to-write-a-UI-component" class="headerlink" title="18.    How to write a UI component"></a>18.    How to write a UI component</h2><ul>
<li>1)    Common components please refer to code in components folder</li>
<li>2)    Business components please refer to each module’s components folder</li>
<li>3)    Common components must have propTypes, could have defaultProps</li>
</ul>
<h2 id="19-HTML-and-CSS-rules"><a href="#19-HTML-and-CSS-rules" class="headerlink" title="19.    HTML and CSS rules"></a>19.    HTML and CSS rules</h2><ul>
<li>1)    Recommend to use flex box (add –webkit- if require all phone browser support) because it is a multi-devices and multi-languages html page, but you can choose bootstrap also</li>
<li>2)    HTML element semanticization</li>
<li>3)    flexible.js is used to set root font size and body font size based on screen size</li>
<li>4)    Size based on rem (proportion of root font size)</li>
<li>5)    Font size based on body font size, percentage and fixed (px) value are all recommend</li>
<li>6)    Because webpack won’t optimize bundle (will be duplicated packed if import other scss file), so do not import other business module’s scss. Please keep scss file and UI component can work alone.</li>
</ul>
<h2 id="20-Release-package-nginx-config"><a href="#20-Release-package-nginx-config" class="headerlink" title="20.    Release package nginx config"></a>20.    Release package nginx config</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">location</span> /app &#123;</div><div class="line">  <span class="attribute">root</span>   /path-to-dist-folder;</div><div class="line">  <span class="attribute">index</span>  /index.html;</div><div class="line">  <span class="attribute">try_files</span> <span class="variable">$uri</span> /index.html;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
      
        <a class="link primary next"
          href="index.html">
          <span class="subtitle-pagination">Next</span>
          Preparation
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <!--
  <div class="github">
    <a class="link tertiary " href="https://github.com/zhuliliang/ebaocloud-li-docs/tree/master/content/README.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>
-->

  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();

     
      

      // search box
      

      
    </script>
  </body>
</html>
